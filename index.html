<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <link rel="icon" href="/p5_lifegame/favicon.ico" type="image/x-icon" />
  <title>ãƒ©ã‚¤ãƒ•ã‚²ãƒ¼ãƒ  - ã¯ãŸã‚‰ãç´°èƒã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ </title>
  <script src="https://cdn.jsdelivr.net/npm/p5@1.9.0/lib/p5.min.js"></script>

  <style>
    body {
      font-family: sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      margin: 0;
      padding: 0;
    }
    .description-toggle {
      margin-top: 1em;
      font-size: 16px;
      cursor: pointer;
      padding: 0.5em 1em;
    }
    .description {
      width: 90%;
      max-width: 700px;
      font-size: 16px;
      line-height: 1.8;
      background: #f9f9f9;
      padding: 1em;
      border: 1px solid #ccc;
      border-radius: 8px;
      margin-top: 0.5em;
      display: none;
    }
    .controls {
      width: 90%;
      margin-top: 1em;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .pattern-row {
      display: flex;
      flex-wrap: nowrap;
      overflow-x: auto;
      gap: 0.5em;
    }
    canvas {
      border: 1px solid #ccc;
      margin-top: 1em;
    }
    button {
      margin: 0.2em;
      padding: 0.5em 1em;
      font-size: 16px;
      white-space: nowrap;
    }
    .rule-svg {
      margin: 0.5em 0;
    }
    .stats-container {
      width: 90%;
      max-width: 700px;
    }
    .stat-item {
      font-size: 18px;
    }
    #population-graph {
      width: 90%;
      max-width: 700px;
    }
    
    /* ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ç”¨ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .tutorial-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7);
      display: none;
      z-index: 1000;
    }
    .tutorial-box {
      position: absolute;
      background: white;
      padding: 2em;
      border-radius: 10px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
      max-width: 500px;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 1002;
    }
    .tutorial-box h2 {
      margin-top: 0;
    }
    .tutorial-buttons {
      margin-top: 1.5em;
      display: flex;
      gap: 1em;
      justify-content: flex-end;
    }
    .highlight-tutorial {
      box-shadow: 0 0 20px 5px rgba(255, 255, 0, 0.8);
      position: relative;
      z-index: 999;
    }
  </style>
</head>
<body>
  <div style="display: flex; align-items: center; justify-content: center; gap: 1em; margin-top: 0.5em;">
    <h1 style="font-size: 2em; margin: 0;">ğŸŒ± ãƒ©ã‚¤ãƒ•ã‚²ãƒ¼ãƒ ï¼šã¯ãŸã‚‰ãç´°èƒã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ </h1>
    <button id="rule-toggle" class="description-toggle" onclick="toggleDescription()">ğŸ“˜ ãƒ«ãƒ¼ãƒ«ã‚’ã²ã‚‰ã / ã¨ã˜ã‚‹</button>
  </div>
  <div class="description" id="description"  style="display: none;">
    <h2>ãƒ©ã‚¤ãƒ•ã‚²ãƒ¼ãƒ ã£ã¦ãªã«ï¼Ÿ</h2>
    <p>
      ãƒ©ã‚¤ãƒ•ã‚²ãƒ¼ãƒ ã¯ã€é»’ã„ã—ã‹ãï¼ˆã„ãã¦ã‚‹ï¼‰ã¨ã€ç™½ã„ã—ã‹ãï¼ˆã—ã‚“ã§ã‚‹ï¼‰ã§ã§ããŸã‚²ãƒ¼ãƒ ã§ã™ã€‚
      ãã¾ã‚Šã«ã—ãŸãŒã£ã¦ã€ã˜ã¶ã‚“ã§ã©ã‚“ã©ã‚“å‹•ã„ã¦ã„ãã¾ã™ã€‚
    </p>

    <h3>ãã¾ã‚Šï¼ˆãƒ«ãƒ¼ãƒ«ï¼‰</h3>
    <p>1ã¤ã®ã—ã‹ãï¼ˆãƒã‚¹ï¼‰ã®ã¾ã‚ã‚Šã«ã¯ã€8ã¤ã®ã€Œã¨ãªã‚Šã€ãŒã‚ã‚Šã¾ã™ã€‚</p>

    <div class="rule-svg">
      <svg width="150" height="150">
        <rect x="50" y="50" width="50" height="50" fill="#ffaaaa" />
        <rect x="0" y="0" width="50" height="50" fill="#ddd" />
        <rect x="50" y="0" width="50" height="50" fill="#ddd" />
        <rect x="100" y="0" width="50" height="50" fill="#ddd" />
        <rect x="0" y="50" width="50" height="50" fill="#ddd" />
        <rect x="100" y="50" width="50" height="50" fill="#ddd" />
        <rect x="0" y="100" width="50" height="50" fill="#ddd" />
        <rect x="50" y="100" width="50" height="50" fill="#ddd" />
        <rect x="100" y="100" width="50" height="50" fill="#ddd" />
        <text x="60" y="80" font-size="20">ä¸»</text>
      </svg>
      <p style="margin-top: 0;">ã¾ã‚“ãªã‹ãŒã€Œã„ã¾ã®ã‚»ãƒ«ã€ã€ã¾ã‚ã‚ŠãŒã€Œã¨ãªã‚Šã€ã§ã™ã€‚</p>
    </div>

    <h4>â‘  ã†ã¾ã‚Œã‚‹</h4>
    <p>ã—ã‚“ã§ã„ã‚‹ãƒã‚¹ã®ã¨ãªã‚Šã«ã€ã¡ã‚‡ã†ã©3ã“ã®ç”ŸããŸãƒã‚¹ãŒã‚ã‚‹ã¨ã€Œã†ã¾ã‚Œã‚‹ã€ï¼</p>

    <h4>â‘¡ ã„ãã®ã“ã‚‹</h4>
    <p>ã„ãã¦ã‚‹ãƒã‚¹ã®ã¨ãªã‚Šã«ã€2ã“ã‹3ã“ã®ç”ŸããŸãƒã‚¹ãŒã‚ã‚‹ã¨ã€Œã„ãã®ã“ã‚‹ã€</p>

    <h4>â‘¢ ã—ã¬</h4>
    <p>ã¨ãªã‚ŠãŒã™ããªã™ããŸã‚Šï¼ˆ1ã“ä»¥ä¸‹ï¼‰ or ãŠãŠã™ããŸã‚Šï¼ˆ4ã“ä»¥ä¸Šï¼‰ã™ã‚‹ã¨ã€Œã—ã‚“ã§ã—ã¾ã†ã€</p>

    <h3>ã©ã†ã‚„ã£ã¦ã‚ãã¶ã®ï¼Ÿ</h3>
    <ul>
      <li>ãƒã‚¹ã‚’ã‚¯ãƒªãƒƒã‚¯ï¼šç”ŸããŸã‚Šæ­»ã‚“ã ã‚Šï¼ˆãƒˆã‚°ãƒ«ï¼‰</li>
      <li>ãƒ‰ãƒ©ãƒƒã‚°ï¼šç·šã‚’ã²ãã‚ˆã†ã«ç”Ÿããƒã‚¹ã‚’ã¤ãã‚‹</li>
      <li>ã—ãŸã®ãƒœã‚¿ãƒ³ï¼šã„ã‚ã‚“ãªãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ãªã‚‰ã¹ã¦è¦‹ã¦ã¿ã‚ˆã†ï¼</li>
      <li>â¸ï¸ã¨ã‚ã‚‹ï¼šå‹•ãã‚’ã¨ã‚ãŸã‚Šã€ã¾ãŸå‹•ã‹ã—ãŸã‚Šã§ãã‚‹ã‚ˆ</li>
    </ul>
  </div>

  <div class="controls" style="display: flex; justify-content: space-between; width: 90%; max-width: 700px;">
    <div class="control-row" style="display: flex; align-items: center; gap: 0.5em;">
        <div style="display: flex; flex-direction: column; align-items: center;">
          <label style="font-size: 12px;">ã‚»ãƒ«ã‚µã‚¤ã‚º</label>
          <div style="display: flex; align-items: center; gap: 0.5em;">
            <input type="range" id="cellSizeSlider" min="10" max="50" value="10" />
            <span id="cellSizeLabel">30</span>
          </div>
        </div>
        <div style="display: flex; flex-direction: column; align-items: center;">
          <label style="font-size: 12px;">é€Ÿåº¦</label>
          <div style="display: flex; align-items: center; gap: 0.5em;">
            <input type="range" id="speedSlider" min="1" max="60" value="10" />
            <span id="speedLabel">10</span>
          </div>
        </div>
        <button onclick="previousGeneration()" title="å·»ãæˆ»ã—">â®ï¸</button>
      <button id="stop" title="ã¨ã‚ã‚‹">â¸ï¸</button>
      <button id="start" title="ã†ã”ã‹ã™">â–¶ï¸</button>
      <button onclick="clearField()" title="æ¶ˆã™">â¹ï¸</button>
      <button onclick="stepGeneration()" title="æ—©é€ã‚Š">â©</button>
    </div>
    <div class="pattern-row">
      <button onclick="placePattern('glider')">ğŸ›¸ ã‚°ãƒ©ã‚¤ãƒ€ãƒ¼</button>
      <button onclick="placePattern('blinker')">ğŸ” ãƒ–ãƒªãƒ³ã‚«ãƒ¼</button>
      <button onclick="placePattern('block')">â¬› ãƒ–ãƒ­ãƒƒã‚¯</button>
      <button onclick="placePattern('pulsar')">ğŸŒ¸ ãƒ‘ãƒ«ã‚µãƒ¼</button>
      <button onclick="placePattern('lwss')">ğŸš€ LWSS</button>
      <button onclick="placePattern('glidergun')">ğŸ”« ã‚°ãƒ©ã‚¤ãƒ€ãƒ¼ã‚¬ãƒ³</button>
    </div>
  </div>

  <!-- çµ±è¨ˆæƒ…å ±è¡¨ç¤ºã‚¨ãƒªã‚¢ -->
  <div class="stats-container" style="display: flex; gap: 2em; align-items: center; margin-top: 1em;">
    <div class="stat-item">
      <span style="font-weight: bold;">ğŸ”¢ ä¸–ä»£:</span>
      <span id="generation-count">0</span>
    </div>
    <div class="stat-item">
      <span style="font-weight: bold;">ğŸ¦  ç”Ÿãã¦ã„ã‚‹ç´°èƒ:</span>
      <span id="cell-count">0</span>
    </div>
    <button id="tutorial-btn" onclick="startTutorial()" style="margin-left: auto;">ğŸ“š ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«</button>
  </div>

  <!-- äººå£ã‚°ãƒ©ãƒ• -->
  <canvas id="population-graph" width="700" height="150" style="border: 1px solid #ccc; margin-top: 1em; display: block;"></canvas>

  <!-- ã‚­ãƒ£ãƒ³ãƒã‚¹ã¯ p5.js ãŒè‡ªå‹•ç”Ÿæˆ -->

  <!-- ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ -->
  <div class="tutorial-overlay" id="tutorial-overlay">
    <div class="tutorial-box" id="tutorial-box">
      <h2 id="tutorial-title">ã‚ˆã†ã“ãï¼</h2>
      <p id="tutorial-content">ãƒ©ã‚¤ãƒ•ã‚²ãƒ¼ãƒ ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’å§‹ã‚ã¾ã—ã‚‡ã†ï¼</p>
      <div class="tutorial-buttons">
        <button onclick="prevTutorialStep()">å‰ã¸</button>
        <button onclick="nextTutorialStep()">æ¬¡ã¸</button>
        <button onclick="endTutorial()">çµ‚äº†</button>
      </div>
    </div>
  </div>

  <script>
    function toggleDescription() {
      const desc = document.getElementById("description");
      desc.style.display = desc.style.display === "none" ? "block" : "none";
    }
    
    // ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«é–¢é€£ã®å¤‰æ•°
    let tutorialStep = 0;
    const tutorialSteps = [
      {
        title: "ã‚ˆã†ã“ãï¼ãƒ©ã‚¤ãƒ•ã‚²ãƒ¼ãƒ ã®ä¸–ç•Œã¸",
        content: "ã“ã‚Œã‹ã‚‰ãƒ©ã‚¤ãƒ•ã‚²ãƒ¼ãƒ ã®éŠã³æ–¹ã‚’èª¬æ˜ã—ã¾ã™ã€‚<br>ãƒ©ã‚¤ãƒ•ã‚²ãƒ¼ãƒ ã¯ã€ç´°èƒãŒç”Ÿã¾ã‚ŒãŸã‚Šæ­»ã‚“ã ã‚Šã™ã‚‹æ§˜å­ã‚’è¦³å¯Ÿã™ã‚‹ã‚²ãƒ¼ãƒ ã§ã™ã€‚",
        highlight: null
      },
      {
        title: "ç´°èƒã‚’ç½®ã„ã¦ã¿ã‚ˆã†",
        content: "ç”»é¢ã®ç™½ã„éƒ¨åˆ†ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€é»’ã„ç´°èƒã‚’ç½®ãã“ã¨ãŒã§ãã¾ã™ã€‚<br>ã‚‚ã†ä¸€åº¦ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨æ¶ˆãˆã¾ã™ã€‚è©¦ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼",
        highlight: "#lifegame-canvas"
      },
      {
        title: "ç´°èƒã®ãƒ«ãƒ¼ãƒ«",
        content: "ç´°èƒã«ã¯3ã¤ã®ãƒ«ãƒ¼ãƒ«ãŒã‚ã‚Šã¾ã™ï¼š<br>1. å‘¨ã‚Šã«3ã¤ã®ç´°èƒãŒã‚ã‚‹ã¨ç”Ÿã¾ã‚Œã‚‹<br>2. å‘¨ã‚Šã«2ã€œ3å€‹ã®ç´°èƒãŒã‚ã‚‹ã¨ç”Ÿãæ®‹ã‚‹<br>3. ãã‚Œä»¥å¤–ã¯æ­»ã‚“ã§ã—ã¾ã†",
        highlight: null
      },
      {
        title: "ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å‹•ã‹ãã†",
        content: "â–¶ï¸ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ã€ç´°èƒãŒå‹•ãå§‹ã‚ã¾ã™ã€‚<br>â¸ï¸ãƒœã‚¿ãƒ³ã§æ­¢ã‚ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚",
        highlight: "#start"
      },
      {
        title: "ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’è©¦ãã†",
        content: "ä¸‹ã®ãƒœã‚¿ãƒ³ã‹ã‚‰ã€æœ‰åãªãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’é¸ã‚“ã§é…ç½®ã§ãã¾ã™ã€‚<br>ã€Œã‚°ãƒ©ã‚¤ãƒ€ãƒ¼ã€ã‚’è©¦ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼",
        highlight: ".pattern-row"
      },
      {
        title: "çµ±è¨ˆã‚’è¦‹ã¦ã¿ã‚ˆã†",
        content: "ç”»é¢ä¸Šéƒ¨ã«ã¯ã€ä½•ä¸–ä»£ç›®ã‹ã¨ã€ç”Ÿãã¦ã„ã‚‹ç´°èƒã®æ•°ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚<br>ä¸‹ã®ã‚°ãƒ©ãƒ•ã§ã¯ã€ç´°èƒæ•°ã®å¤‰åŒ–ã‚’è¦‹ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚",
        highlight: ".stats-container"
      },
      {
        title: "ã•ã‚ã€å§‹ã‚ã¾ã—ã‚‡ã†ï¼",
        content: "ã“ã‚Œã§ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã¯çµ‚äº†ã§ã™ã€‚<br>ã„ã‚ã„ã‚ãªãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’è©¦ã—ã¦ã€ç”Ÿå‘½ã®ä¸æ€è­°ãªå‹•ãã‚’è¦³å¯Ÿã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼",
        highlight: null
      }
    ];
    
    function startTutorial() {
      tutorialStep = 0;
      document.getElementById("tutorial-overlay").style.display = "block";
      showTutorialStep();
    }
    
    function showTutorialStep() {
      const step = tutorialSteps[tutorialStep];
      document.getElementById("tutorial-title").textContent = step.title;
      document.getElementById("tutorial-content").innerHTML = step.content;
      
      // æ—¢å­˜ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆã‚’å‰Šé™¤
      document.querySelectorAll(".highlight-tutorial").forEach(el => {
        el.classList.remove("highlight-tutorial");
      });
      
      // æ–°ã—ã„ãƒã‚¤ãƒ©ã‚¤ãƒˆã‚’è¿½åŠ 
      if (step.highlight) {
        const element = document.querySelector(step.highlight);
        if (element) {
          element.classList.add("highlight-tutorial");
        }
      }
      
      // ãƒœã‚¿ãƒ³ã®çŠ¶æ…‹ã‚’æ›´æ–°
      const prevBtn = document.querySelector(".tutorial-buttons button:first-child");
      prevBtn.disabled = tutorialStep === 0;
      prevBtn.style.opacity = tutorialStep === 0 ? "0.5" : "1";
    }
    
    function nextTutorialStep() {
      if (tutorialStep < tutorialSteps.length - 1) {
        tutorialStep++;
        showTutorialStep();
      } else {
        endTutorial();
      }
    }
    
    function prevTutorialStep() {
      if (tutorialStep > 0) {
        tutorialStep--;
        showTutorialStep();
      }
    }
    
    function endTutorial() {
      document.getElementById("tutorial-overlay").style.display = "none";
      document.querySelectorAll(".highlight-tutorial").forEach(el => {
        el.classList.remove("highlight-tutorial");
      });
    }
  </script>
   <script src="lifegame.js" defer></script>
</body>
</html>
